define(["basetools"],function(e){var r=function(r){var t=!1;$.restAjax({url:$.apiPath+moduleName.role+$.apijoin+"roles"+$.apijoin+$("#roleId").val(),type:"get",cache:!1,success:function(e){"200"==e.status&&e.result&&$("#roleedit_form").json2form({data:e.result})}}),$("#roleedit_form input,textarea").change(function(){t=!0}),$("#roleedit_form").validate({errorElement:"em",errorContainer:"#errordiv",errorLabelContainer:"#errortip",rules:{roleName:{required:!0,isGB18030:!0,maxlength:8},description:{maxlength:20}},messages:{roleName:{required:" 请输入岗位名称；",isGB18030:"岗位名称只能输入汉字",maxlength:" 岗位名称不能超过8个字符；"},description:{maxlength:" 说明不能超过20个字符；"}},submitHandler:function(t){var o=$("#roleedit_form").form2json();$.restAjax({url:$.apiPath+moduleName.role+$.apijoin+"roles"+$.apijoin+$("#roleId").val(),type:"put",dataType:"json",data:o,async:!1,success:function(t){"200"==t.status&&($("#role_table").dataTable().fnUpdate(t.result,r,null,!1),$("#roleedit_close").click(),e.backTip(t,"Y"))}})}}),$("#roleedit_cancel").click(function(){t?$.confirm({title:"确认信息",content:"确认取消当前所做的操作",confirmButton:"是",cancelButton:"否",confirm:function(){$("#roleedit_close").click()}}):$("#roleedit_close").click()})};return{init:r}});