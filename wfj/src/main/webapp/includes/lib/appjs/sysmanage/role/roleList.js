define(["DT","basetools"],function(e,t){var o=function(){$.app.pageSetUp(),e.createTable("role",{url:$.apiPath+moduleName.role+$.apijoin+"roles"+$.apijoin+"page",aoColumns:[{sTitle:"sequenceNBR",mData:"sequenceNBR",sClass:"center",bVisible:!1},{sTitle:"岗位编码",mData:"roleCode",sClass:"left"},{sTitle:"岗位名称",mData:"roleName",sClass:"left"},{sTitle:"说明",mData:"description",sClass:"left"},{sTitle:"锁定状态",mData:"lockStatus",sClass:"center",render:function(e,t,o,a){return"Y"==o.lockStatus?"禁用":"启用"}},{sTitle:"操作",sDefaultContent:"",sClass:"center",render:function(e,t,o,a){var l=["Y"==o.lockStatus?'<a class="btn btn-primary btn-xs" href="javascript:void(0)" onclick="roleLocked(\''+o.roleCode+"','"+a.row+"')\">&nbsp;启用&nbsp;</a>":'<a class="btn btn-primary btn-xs" href="javascript:void(0)" onclick="roleLocked(\''+o.roleCode+"','"+a.row+"')\">&nbsp;禁用&nbsp;</a>",'<a class="btn btn-primary btn-xs" href="javascript:void(0)" onclick="roleEdit(\''+o.roleCode+"','"+a.row+"')\">&nbsp;编辑&nbsp;</a>",'<a class="btn btn-primary btn-xs" href="javascript:void(0)" onclick="roleDel(\''+o.roleCode+"','"+a.row+"')\">&nbsp;删除&nbsp;</a>"].join("  ");return"<b>"+l+"</b>"}}],extra:{bSort:!1},search_fields:[{display:"岗位名称",name:"roleNameSearch",type:"text",cid:"roleName"}],toolbar:{buttons:[{btnId:"add_role",title:"创建",callback:function(){$("#role_modal").modal({backdrop:"static",remote:"role/roleAdd"})}}]}}),$("#role_modal").on("hidden.bs.modal",function(){$(this).removeData("bs.modal")})};return this.roleEdit=function(e,t){$("#role_modal").modal({backdrop:"static",remote:"role/roleEdit?id="+e+"&row="+t})},this.roleLocked=function(e,o){$.confirm({title:"确认信息",content:"是否确认当前所做的操作。",confirmButton:"是",cancelButton:"否",confirm:function(){$.restAjax({url:$.apiPath+moduleName.role+$.apijoin+"roles"+$.apijoin+e+$.apijoin+"lockStatus",type:"PUT",dataType:"json",success:function(e){"200"==e.status&&($("#role_table").dataTable().fnDeleteRow(o,null,!0),t.backTip(e,"Y"))}})}})},this.roleDel=function(e,o){$.confirm({title:"确认信息",content:"是否删除所选信息。",confirmButton:"是",cancelButton:"否",confirm:function(){$.restAjax({url:$.apiPath+moduleName.role+$.apijoin+"roles",type:"delete",data:JSON.stringify([e]),success:function(e){"200"==e.status&&($("#role_table").dataTable().fnDeleteRow(o,null,!0),t.backTip(e,"Y"))}})}})},{roleTabInit:o}});