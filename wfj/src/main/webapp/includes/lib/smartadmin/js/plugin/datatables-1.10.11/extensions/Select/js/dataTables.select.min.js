/*!
 Select for DataTables 1.1.2
 2015-2016 SpryMedia Ltd - datatables.net/license/mit
*/

!function(e){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,l){return t||(t=window),l&&l.fn.dataTable||(l=require("datatables.net")(t,l).$),e(l,t,t.document)}:e(jQuery,window,document)}(function(e,t,l,s){function c(t){var l=t.settings()[0]._select.selector;e(t.table().body()).off("mousedown.dtSelect",l).off("mouseup.dtSelect",l).off("click.dtSelect",l),e("body").off("click.dtSelect")}function n(l){var s=e(l.table().body()),c=l.settings()[0],n=c._select.selector;s.on("mousedown.dtSelect",n,function(e){e.shiftKey&&s.css("-moz-user-select","none").one("selectstart.dtSelect",n,function(){return!1})}).on("mouseup.dtSelect",n,function(){s.css("-moz-user-select","")}).on("click.dtSelect",n,function(s){var c=l.select.items();if(!t.getSelection||!t.getSelection().toString()){var n=l.settings()[0];if(e(s.target).closest("div.dataTables_wrapper")[0]==l.table().container()){var a=e(s.target).closest("td, th"),o=l.cell(a).index();l.cell(a).any()&&("row"===c?(c=o.row,r(s,l,n,"row",c)):"column"===c?(c=l.cell(a).index().column,r(s,l,n,"column",c)):"cell"===c&&(c=l.cell(a).index(),r(s,l,n,"cell",c)),n._select_lastCell=o)}}}),e("body").on("click.dtSelect",function(t){c._select.blurable&&!e(t.target).parents().filter(l.table().container()).length&&(e(t.target).parents("div.DTE").length||i(c,!0))})}function a(t,l,s,c){c&&!t.flatten().length||(s.unshift(t),e(t.table().node()).triggerHandler(l+".dt",s))}function o(t){var l=t.settings()[0];if(l._select.info&&l.aanFeatures.i){var s=e('<span class="select-info"/>'),c=function(l,c){s.append(e('<span class="select-item"/>').append(t.i18n("select."+l+"s",{_:"%d "+l+"s selected",0:"",1:"1 "+l+" selected"},c)))};c("row",t.rows({selected:!0}).flatten().length),c("column",t.columns({selected:!0}).flatten().length),c("cell",t.cells({selected:!0}).flatten().length),e.each(l.aanFeatures.i,function(t,l){var l=e(l),c=l.children("span.select-info");c.length&&c.remove(),""!==s.text()&&l.append(s)})}}function i(e,t){if(t||"single"===e._select.style){var l=new u.Api(e);l.rows({selected:!0}).deselect(),l.columns({selected:!0}).deselect(),l.cells({selected:!0}).deselect()}}function r(t,l,s,c,n){var a=l.select.style(),o=l[c](n,{selected:!0}).any();"os"===a?t.ctrlKey||t.metaKey?l[c](n).select(!o):t.shiftKey?"cell"===c?(c=s._select_lastCell||null,o=function(e,t){if(e>t)var s=t,t=e,e=s;var c=!1;return l.columns(":visible").indexes().filter(function(l){return l===e&&(c=!0),l===t?(c=!1,!0):c})},t=function(e,t){var s=l.rows({search:"applied"}).indexes();if(s.indexOf(e)>s.indexOf(t))var c=t,t=e,e=c;var n=!1;return s.filter(function(l){return l===e&&(n=!0),l===t?(n=!1,!0):n})},l.cells({selected:!0}).any()||c?(o=o(c.column,n.column),c=t(c.row,n.row)):(o=o(0,n.column),c=t(0,n.row)),c=l.cells(c,o).flatten(),l.cells(n,{selected:!0}).any()?l.cells(c).deselect():l.cells(c).select()):(t=s._select_lastCell?s._select_lastCell[c]:null,o=l[c+"s"]({search:"applied"}).indexes(),t=e.inArray(t,o),s=e.inArray(n,o),l[c+"s"]({selected:!0}).any()||-1!==t?(t>s&&(a=s,s=t,t=a),o.splice(s+1,o.length),o.splice(0,t)):o.splice(e.inArray(n,o)+1,o.length),l[c](n,{selected:!0}).any()?(o.splice(e.inArray(n,o),1),l[c+"s"](o).deselect()):l[c+"s"](o).select()):(t=l[c+"s"]({selected:!0}),o&&1===t.flatten().length?l[c](n).deselect():(t.deselect(),l[c](n).select())):l[c](n).select(!o)}function d(e,t){return function(l){return l.i18n("buttons."+e,t)}}var u=e.fn.dataTable;u.select={},u.select.version="1.1.2",u.select.init=function(t){var l=t.settings()[0],c=l.oInit.select,n=u.defaults.select,c=c===s?n:c,n="row",a="api",o=!1,i=!0,r="td, th",d="selected";l._select={},!0===c?a="os":"string"==typeof c?a=c:e.isPlainObject(c)&&(c.blurable!==s&&(o=c.blurable),c.info!==s&&(i=c.info),c.items!==s&&(n=c.items),c.style!==s&&(a=c.style),c.selector!==s&&(r=c.selector),c.className!==s)&&(d=c.className),t.select.selector(r),t.select.items(n),t.select.style(a),t.select.blurable(o),t.select.info(i),l._select.className=d,e.fn.dataTable.ext.order["select-checkbox"]=function(t,l){return this.api().column(l,{order:"index"}).nodes().map(function(l){return"row"===t._select.items?e(l).parent().hasClass(t._select.className):"cell"===t._select.items&&e(l).hasClass(t._select.className)})},e(t.table().node()).hasClass("selectable")&&t.select.style("os")},e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(e,t){u.ext.selector[t.type].push(function(e,l,c){var n,l=l.selected,a=[];if(l===s)return c;for(var o=0,i=c.length;o<i;o++)n=e[t.prop][c[o]],(!0===l&&!0===n._select_selected||!1===l&&!n._select_selected)&&a.push(c[o]);return a})}),u.ext.selector.cell.push(function(e,t,l){var c,t=t.selected,n=[];if(t===s)return l;for(var a=0,o=l.length;a<o;a++)c=e.aoData[l[a].row],(!0===t&&c._selected_cells&&!0===c._selected_cells[l[a].column]||!1===t&&(!c._selected_cells||!c._selected_cells[l[a].column]))&&n.push(l[a]);return n});var f=u.Api.register,m=u.Api.registerPlural;return f("select()",function(){return this.iterator("table",function(e){u.select.init(new u.Api(e))})}),f("select.blurable()",function(e){return e===s?this.context[0]._select.blurable:this.iterator("table",function(t){t._select.blurable=e})}),f("select.info()",function(e){return o===s?this.context[0]._select.info:this.iterator("table",function(t){t._select.info=e})}),f("select.items()",function(e){return e===s?this.context[0]._select.items:this.iterator("table",function(t){t._select.items=e,a(new u.Api(t),"selectItems",[e])})}),f("select.style()",function(t){return t===s?this.context[0]._select.style:this.iterator("table",function(l){if(l._select.style=t,!l._select_init){var i=new u.Api(l);l.aoRowCreatedCallback.push({fn:function(t,s,c){for(s=l.aoData[c],s._select_selected&&e(t).addClass(l._select.className),t=0,c=l.aoColumns.length;t<c;t++)(l.aoColumns[t]._select_selected||s._selected_cells&&s._selected_cells[t])&&e(s.anCells[t]).addClass(l._select.className)},sName:"select-deferRender"}),i.on("preXhr.dt.dtSelect",function(){var e=i.rows({selected:!0}).ids(!0).filter(function(e){return e!==s}),t=i.cells({selected:!0}).eq(0).map(function(e){var t=i.row(e.row).id(!0);return t?{row:t,column:e.column}:s}).filter(function(e){return e!==s});i.one("draw.dt.dtSelect",function(){i.rows(e).select(),t.any()&&t.each(function(e){i.cells(e.row,e.column).select()})})}),i.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt",function(){o(i)}),i.on("destroy.dtSelect",function(){c(i),i.off(".dtSelect")})}var r=new u.Api(l);c(r),"api"!==t&&n(r),a(new u.Api(l),"selectStyle",[t])})}),f("select.selector()",function(e){return e===s?this.context[0]._select.selector:this.iterator("table",function(t){c(new u.Api(t)),t._select.selector=e,"api"!==t._select.style&&n(new u.Api(t))})}),m("rows().select()","row().select()",function(t){var l=this;return!1===t?this.deselect():(this.iterator("row",function(t,l){i(t),t.aoData[l]._select_selected=!0,e(t.aoData[l].nTr).addClass(t._select.className)}),this.iterator("table",function(e,t){a(l,"select",["row",l[t]],!0)}),this)}),m("columns().select()","column().select()",function(t){var l=this;return!1===t?this.deselect():(this.iterator("column",function(t,l){i(t),t.aoColumns[l]._select_selected=!0;var s=new u.Api(t).column(l);e(s.header()).addClass(t._select.className),e(s.footer()).addClass(t._select.className),s.nodes().to$().addClass(t._select.className)}),this.iterator("table",function(e,t){a(l,"select",["column",l[t]],!0)}),this)}),m("cells().select()","cell().select()",function(t){var l=this;return!1===t?this.deselect():(this.iterator("cell",function(t,l,c){i(t),l=t.aoData[l],l._selected_cells===s&&(l._selected_cells=[]),l._selected_cells[c]=!0,l.anCells&&e(l.anCells[c]).addClass(t._select.className)}),this.iterator("table",function(e,t){a(l,"select",["cell",l[t]],!0)}),this)}),m("rows().deselect()","row().deselect()",function(){var t=this;return this.iterator("row",function(t,l){t.aoData[l]._select_selected=!1,e(t.aoData[l].nTr).removeClass(t._select.className)}),this.iterator("table",function(e,l){a(t,"deselect",["row",t[l]],!0)}),this}),m("columns().deselect()","column().deselect()",function(){var t=this;return this.iterator("column",function(t,l){t.aoColumns[l]._select_selected=!1;var s=new u.Api(t),c=s.column(l);e(c.header()).removeClass(t._select.className),e(c.footer()).removeClass(t._select.className),s.cells(null,l).indexes().each(function(l){var s=t.aoData[l.row],c=s._selected_cells;s.anCells&&(!c||!c[l.column])&&e(s.anCells[l.column]).removeClass(t._select.className)})}),this.iterator("table",function(e,l){a(t,"deselect",["column",t[l]],!0)}),this}),m("cells().deselect()","cell().deselect()",function(){var t=this;return this.iterator("cell",function(t,l,s){l=t.aoData[l],l._selected_cells[s]=!1,l.anCells&&!t.aoColumns[s]._select_selected&&e(l.anCells[s]).removeClass(t._select.className)}),this.iterator("table",function(e,l){a(t,"deselect",["cell",t[l]],!0)}),this}),e.extend(u.ext.buttons,{selected:{text:d("selected","Selected"),className:"buttons-selected",init:function(e){var t=this;e.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var e=t.rows({selected:!0}).any()||t.columns({selected:!0}).any()||t.cells({selected:!0}).any();t.enable(e)}),this.disable()}},selectedSingle:{text:d("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(e){var t=this;e.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var l=e.rows({selected:!0}).flatten().length+e.columns({selected:!0}).flatten().length+e.cells({selected:!0}).flatten().length;t.enable(1===l)}),this.disable()}},selectAll:{text:d("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:d("selectNone","Deselect all"),className:"buttons-select-none",action:function(){i(this.settings()[0],!0)},init:function(e){var t=this;e.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var l=e.rows({selected:!0}).flatten().length+e.columns({selected:!0}).flatten().length+e.cells({selected:!0}).flatten().length;t.enable(0<l)}),this.disable()}}}),e.each(["Row","Column","Cell"],function(e,t){var l=t.toLowerCase();u.ext.buttons["select"+t+"s"]={text:d("select"+t+"s","Select "+l+"s"),className:"buttons-select-"+l+"s",action:function(){this.select.items(l)},init:function(e){var t=this;e.on("selectItems.dt.DT",function(e,s,c){t.active(c===l)})}}}),e(l).on("preInit.dt.dtSelect",function(e,t){"dt"===e.namespace&&u.select.init(new u.Api(t))}),u.select});