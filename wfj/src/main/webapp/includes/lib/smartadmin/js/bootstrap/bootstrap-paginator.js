/**
 * bootstrap-paginator.js v0.5
 * --
 * Copyright 2013 Yun Lai <lyonlai1984@gmail.com>
 * --
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(t){"use strict";var e=function(t,e){this.init(t,e)},s=null;e.prototype={init:function(e,s){this.$element=t(e);var i=s&&s.bootstrapMajorVersion?s.bootstrapMajorVersion:t.fn.bootstrapPaginator.defaults.bootstrapMajorVersion;this.$element.attr("id");if(2===i&&!this.$element.is("div"))throw"in Bootstrap version 2 the pagination must be a div element. Or if you are using Bootstrap pagination 3. Please specify it in bootstrapMajorVersion in the option";if(i>2&&!this.$element.is("ul"))throw"in Bootstrap version 3 the pagination root item must be an ul element.";this.currentPage=1,this.lastPage=1,this.setOptions(s),this.initialized=!0},setOptions:function(e){this.options=t.extend({},this.options||t.fn.bootstrapPaginator.defaults,e),this.totalPages=parseInt(this.options.totalPages,10),this.numberOfPages=parseInt(this.options.numberOfPages,10),e&&"undefined"!=typeof e.currentPage&&this.setCurrentPage(e.currentPage),this.listen(),this.render(),this.initialized||this.lastPage===this.currentPage||this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},listen:function(){this.$element.off("page-clicked"),this.$element.off("page-changed"),"function"==typeof this.options.onPageClicked&&this.$element.bind("page-clicked",this.options.onPageClicked),"function"==typeof this.options.onPageChanged&&this.$element.on("page-changed",this.options.onPageChanged),this.$element.bind("page-clicked",this.onPageClicked)},destroy:function(){this.$element.off("page-clicked"),this.$element.off("page-changed"),this.$element.removeData("bootstrapPaginator"),this.$element.empty()},show:function(t){this.setCurrentPage(t),this.render(),this.lastPage!==this.currentPage&&this.$element.trigger("page-changed",[this.lastPage,this.currentPage])},showNext:function(){var t=this.getPages();t.next&&this.show(t.next)},showPrevious:function(){var t=this.getPages();t.prev&&this.show(t.prev)},showFirst:function(){var t=this.getPages();t.first&&this.show(t.first)},showLast:function(){var t=this.getPages();t.last&&this.show(t.last)},onPageItemClicked:function(t){var e=t.data.type,s=t.data.page;this.$element.trigger("page-clicked",[t,e,s])},onPageClicked:function(e,s,i,a,n){var o=t(e.currentTarget);switch(i){case"first":o.bootstrapPaginator("showFirst");break;case"prev":o.bootstrapPaginator("showPrevious");break;case"next":o.bootstrapPaginator("showNext");break;case"last":o.bootstrapPaginator("showLast");break;case"page":o.bootstrapPaginator("show",a)}},render:function(){var e=this.getValueFromOption(this.options.containerClass,this.$element),s=this.options.size||"normal",i=this.options.alignment||"left",a=this.getPages(),n=2===this.options.bootstrapMajorVersion?t("<ul></ul>"):this.$element,o=2===this.options.bootstrapMajorVersion?this.getValueFromOption(this.options.listContainerClass,n):null,r=null,h=null,l=null,p=null,g=null,u=0;switch(this.$element.prop("class",""),this.$element.addClass("pagination"),s.toLowerCase()){case"large":case"small":case"mini":this.$element.addClass(t.fn.bootstrapPaginator.sizeArray[this.options.bootstrapMajorVersion][s.toLowerCase()])}if(2===this.options.bootstrapMajorVersion)switch(i.toLowerCase()){case"center":this.$element.addClass("pagination-centered");break;case"right":this.$element.addClass("pagination-right")}if(this.$element.addClass(e),this.$element.empty(),2===this.options.bootstrapMajorVersion&&(this.$element.append(n),n.addClass(o)),this.pageRef=[],a.first&&(r=this.buildPageItem("first",a.first),r&&n.append(r)),a.prev&&(h=this.buildPageItem("prev",a.prev),h&&n.append(h)),a.length>1)for(u=0;u<a.length;u+=1)g=this.buildPageItem("page",a[u]),g&&n.append(g);a.next&&(l=this.buildPageItem("next",a.next),l&&n.append(l)),a.last&&(p=this.buildPageItem("last",a.last),p&&n.append(p))},buildPageItem:function(e,s){var i=t("<li></li>"),a=t("<a></a>"),n="",o="",r=this.options.itemContainerClass(e,s,this.currentPage),h=this.getValueFromOption(this.options.itemContentClass,e,s,this.currentPage),l=null;switch(e){case"first":if(!this.getValueFromOption(this.options.shouldShowPage,e,s,this.currentPage))return;n=this.options.itemTexts(e,s,this.currentPage),o=this.options.tooltipTitles(e,s,this.currentPage);break;case"last":if(!this.getValueFromOption(this.options.shouldShowPage,e,s,this.currentPage))return;n=this.options.itemTexts(e,s,this.currentPage),o=this.options.tooltipTitles(e,s,this.currentPage);break;case"prev":if(!this.getValueFromOption(this.options.shouldShowPage,e,s,this.currentPage))return;n=this.options.itemTexts(e,s,this.currentPage),o=this.options.tooltipTitles(e,s,this.currentPage);break;case"next":if(!this.getValueFromOption(this.options.shouldShowPage,e,s,this.currentPage))return;n=this.options.itemTexts(e,s,this.currentPage),o=this.options.tooltipTitles(e,s,this.currentPage);break;case"page":if(!this.getValueFromOption(this.options.shouldShowPage,e,s,this.currentPage))return;n=this.options.itemTexts(e,s,this.currentPage),o=this.options.tooltipTitles(e,s,this.currentPage)}return i.addClass(r).append(a),a.addClass(h).html(n).on("click",null,{type:e,page:s},t.proxy(this.onPageItemClicked,this)),this.options.pageUrl&&a.attr("href",this.getValueFromOption(this.options.pageUrl,e,s,this.currentPage)),this.options.useBootstrapTooltip?(l=t.extend({},this.options.bootstrapTooltipOptions,{title:o}),a.tooltip(l)):a.attr("title",o),i},setCurrentPage:function(t){if(t>this.totalPages||t<1)throw"Page out of range";this.lastPage=this.currentPage,this.currentPage=parseInt(t,10)},getPages:function(){var t=this.totalPages,e=this.currentPage%this.numberOfPages===0?(parseInt(this.currentPage/this.numberOfPages,10)-1)*this.numberOfPages+1:parseInt(this.currentPage/this.numberOfPages,10)*this.numberOfPages+1,s=[],i=0,a=0;for(e=e<1?1:e,i=e,a=0;a<this.numberOfPages&&i<=t;i+=1,a+=1)s.push(i);return s.first=1,this.currentPage>1?s.prev=this.currentPage-1:s.prev=1,this.currentPage<t?s.next=this.currentPage+1:s.next=t,s.last=t,s.current=this.currentPage,s.total=t,s.numberOfPages=this.options.numberOfPages,s},getValueFromOption:function(t){var e=null,s=Array.prototype.slice.call(arguments,1);return e="function"==typeof t?t.apply(this,s):t}},s=t.fn.bootstrapPaginator,t.fn.bootstrapPaginator=function(s){var i=arguments,a=null;return t(this).each(function(n,o){var r=t(o),h=r.data("bootstrapPaginator"),l="object"!=typeof s?null:s;if(!h)return h=new e(this,l),r=t(h.$element),void r.data("bootstrapPaginator",h);if("string"==typeof s){if(!h[s])throw"Method "+s+" does not exist";a=h[s].apply(h,Array.prototype.slice.call(i,1))}else a=h.setOptions(s)}),a},t.fn.bootstrapPaginator.sizeArray={2:{large:"pagination-large",small:"pagination-small",mini:"pagination-mini"},3:{large:"pagination-lg",small:"pagination-sm",mini:""}},t.fn.bootstrapPaginator.defaults={containerClass:"",size:"normal",alignment:"left",bootstrapMajorVersion:2,listContainerClass:"",itemContainerClass:function(t,e,s){return e===s?"active":""},itemContentClass:function(t,e,s){return""},currentPage:1,numberOfPages:5,totalPages:1,pageUrl:function(t,e,s){return null},onPageClicked:null,onPageChanged:null,useBootstrapTooltip:!1,shouldShowPage:function(t,e,s){var i=!0;switch(t){case"first":i=1!==s;break;case"prev":i=1!==s;break;case"next":i=s!==this.totalPages;break;case"last":i=s!==this.totalPages;break;case"page":i=!0}return i},itemTexts:function(t,e,s){switch(t){case"first":return"首页";case"prev":return"上一页";case"next":return"下一页";case"last":return"末页";case"page":return e}},tooltipTitles:function(t,e,s){switch(t){case"first":return"Go to first page";case"prev":return"Go to previous page";case"next":return"Go to next page";case"last":return"Go to last page";case"page":return e===s?"Current page is "+e:"Go to page "+e}},bootstrapTooltipOptions:{animation:!0,html:!0,placement:"top",selector:!1,title:"",container:!1}},t.fn.bootstrapPaginator.Constructor=e}(window.jQuery);